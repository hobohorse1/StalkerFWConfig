<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Artifact Checklist</title>
<style>
  :root{
    --bg:#f5f7fb;
    --card:#ffffff;
    --text:#1e2430;
    --muted:#6b7280;
    --primary:#2d76c2;
    --primary-600:#2565a6;
    --primary-050:#e8f1fb;
    --ring: rgba(45,118,194,.35);
    --border:#e5e7eb;
    --shadow:0 8px 20px rgba(0,0,0,.06);
    --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    color:var(--text); background:var(--bg);
  }
  header{
    background:linear-gradient(180deg,#ffffff 0%, #f0f5fb 100%);
    border-bottom:1px solid var(--border);
  }
  .wrap{max-width:980px; margin:0 auto; padding:28px 16px;}
  .brand{
    display:flex; align-items:center; gap:14px;
  }
  .logo{
    width:44px; height:44px; border-radius:12px; background:var(--primary);
    box-shadow: inset 0 0 0 3px #fff, 0 6px 14px rgba(45,118,194,.35);
  }
  .title{font-size:24px; font-weight:800; letter-spacing:.2px}
  .subtitle{color:var(--muted); margin-top:4px}
  .grid{
    display:grid; grid-template-columns:1fr; gap:18px; margin-top:18px;
  }
  @media (min-width:900px){ .grid{ grid-template-columns: 320px 1fr; } }

  .card{
    background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
  }
  .card h3{margin:0 0 8px 0; font-size:16px}
  .card .body{padding:18px}
  .controls{display:flex; flex-wrap:wrap; gap:10px; align-items:center}
  .search{
    position:relative; flex:1 1 220px;
  }
  .search input{
    width:100%; padding:12px 12px 12px 38px; border:1px solid var(--border); border-radius:12px;
    outline:none; background:#fff;
  }
  .search input:focus{border-color:var(--primary); box-shadow:0 0 0 4px var(--ring)}
  .search .icon{
    position:absolute; left:12px; top:50%; transform:translateY(-50%); color:var(--muted); font-size:14px;
  }
  .btn{
    padding:11px 14px; border-radius:12px; border:1px solid var(--border);
    background:#fff; cursor:pointer; transition:.15s ease; font-weight:600;
  }
  .btn:hover{transform:translateY(-1px)}
  .btn.primary{background:var(--primary); border-color:var(--primary); color:#fff}
  .btn.primary:hover{background:var(--primary-600)}
  .muted{color:var(--muted); font-size:13px}

  .toolbar{
    display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;
  }
  .progress{
    margin-top:10px; background:var(--primary-050); border-radius:999px; height:10px; overflow:hidden;
    border:1px solid var(--border);
  }
  .progress > div{height:100%; width:0; background:var(--primary); transition:width .25s ease}

  .list{
    max-height:70vh; overflow:auto; border-top:1px solid var(--border);
  }
  .item{
    display:flex; align-items:center; gap:12px; padding:12px 18px; border-bottom:1px solid var(--border); background:#fff;
  }
  .item:last-child{border-bottom:none}
  .item label{flex:1}
  .item .name{font-weight:600}
  .item .name.done{color:#94a3b8; text-decoration:line-through}
  input[type="checkbox"]{
    width:18px; height:18px; accent-color:var(--primary);
  }

  .footer-note{margin-top:10px; color:var(--muted); font-size:12px}
  @media print{
    header, .toolbar, .search, .footer-note{display:none !important}
    .card{box-shadow:none; border:none}
    .list{max-height:none; overflow:visible}
    body{background:#fff}
  }
</style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div class="title">Artifact Checklist</div>
          <div class="subtitle">Tick items, filter quickly, and save progress automatically.</div>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <!-- Left: Controls -->
      <section class="card">
        <div class="body">
          <h3>Controls</h3>
          <div class="controls">
            <div class="search">
              <span class="icon">ðŸ”Ž</span>
              <input id="search" type="search" placeholder="Filter artifacts..." aria-label="Filter artifacts">
            </div>
            <button class="btn" id="markAll">Mark all</button>
            <button class="btn" id="clearAll">Clear all</button>
            <button class="btn" id="print">Print</button>
            <button class="btn" id="exportBtn">Export</button>
            <button class="btn" id="importBtn">Import</button>
            <input id="importFile" type="file" accept="application/json" style="display:none">
          </div>

          <div class="toolbar">
            <span class="muted" id="counts">0 / 0 complete</span>
            <span class="muted" id="filteredNote" style="display:none;">(filtered)</span>
          </div>
          <div class="progress" aria-hidden="true">
            <div id="bar"></div>
          </div>
          <div class="footer-note">
            Progress is saved locally in your browser. Export a backup if you switch devices.
          </div>
        </div>
      </section>

      <!-- Right: Checklist -->
      <section class="card">
        <div class="body">
          <h3>Checklist</h3>
        </div>
        <div class="list" id="list"></div>
      </section>
    </div>
  </main>

<script>
  // --- Data ---
  const ITEMS = [
    "Battery","BloodOfStone","BreakingMeat","Bubble","Colobolk","Compass","Crustal","Crustal Thorn","Drop",
    "Dummy","Eye","FireBall","Flame","Flash","Flower","GoldenFish","Gravy Insulator","JellyFish","Lens",
    "light","MomisBeads","Monolit","NanoCell","NightStar","Oasis","SeaUrchin","ShineOfTheForest","SnowFlake",
    "Soul","Sparkler Spring","Steering Wheel","StoneFlower","Thorn","Twist"
  ];

  // Normalize keys for storage
  const STORAGE_KEY = "artifact_checklist_v1";
  const state = {
    checked: new Set(),
    filter: ""
  };

  // Load from localStorage
  (function load(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if(raw){
        const obj = JSON.parse(raw);
        if (Array.isArray(obj.checked)) obj.checked.forEach(k => state.checked.add(k));
      }
    }catch(e){ /* ignore */ }
  })();

  // Save
  function save(){
    const data = { checked: [...state.checked] };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  // Build list
  const listEl = document.getElementById("list");
  const countsEl = document.getElementById("counts");
  const filteredNoteEl = document.getElementById("filteredNote");
  const barEl = document.getElementById("bar");
  function render(){
    listEl.innerHTML = "";
    const q = state.filter.trim().toLowerCase();
    const filtered = ITEMS.filter(n => n.toLowerCase().includes(q));
    filteredNoteEl.style.display = q ? "inline" : "none";

    for(const name of filtered){
      const id = "chk_" + name.replace(/\s+/g,"_");
      const row = document.createElement("div");
      row.className = "item";
      row.dataset.name = name;

      const cb = document.createElement("input");
      cb.type = "checkbox";
      cb.id = id;
      cb.checked = state.checked.has(name);

      const label = document.createElement("label");
      label.setAttribute("for", id);
      const span = document.createElement("span");
      span.className = "name" + (cb.checked ? " done":"");
      span.textContent = name;
      label.appendChild(span);

      cb.addEventListener("change", () => {
        if(cb.checked) state.checked.add(name);
        else state.checked.delete(name);
        save();
        updateCounts();
        span.classList.toggle("done", cb.checked);
      });

      row.appendChild(cb);
      row.appendChild(label);
      listEl.appendChild(row);
    }
    updateCounts();
  }

  function updateCounts(){
    const total = ITEMS.length;
    const done = state.checked.size;
    countsEl.textContent = `${done} / ${total} complete`;
    const pct = total ? Math.round((done/total)*100) : 0;
    barEl.style.width = pct + "%";
    barEl.setAttribute("aria-valuenow", pct);
  }

  // Controls
  document.getElementById("search").addEventListener("input", (e)=>{
    state.filter = e.target.value;
    render();
  });

  document.getElementById("markAll").addEventListener("click", ()=>{
    ITEMS.forEach(n => state.checked.add(n));
    save(); render();
  });

  document.getElementById("clearAll").addEventListener("click", ()=>{
    state.checked.clear();
    save(); render();
  });

  document.getElementById("print").addEventListener("click", ()=> window.print());

  // Export state
  document.getElementById("exportBtn").addEventListener("click", ()=>{
    const blob = new Blob([JSON.stringify({checked:[...state.checked]}, null, 2)], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url; a.download = "artifact-checklist.json";
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
  });

  // Import state
  const importFile = document.getElementById("importFile");
  document.getElementById("importBtn").addEventListener("click", ()=> importFile.click());
  importFile.addEventListener("change", ()=>{
    const f = importFile.files[0];
    if(!f) return;
    const reader = new FileReader();
    reader.onload = ()=>{
      try{
        const obj = JSON.parse(reader.result);
        state.checked.clear();
        if (obj && Array.isArray(obj.checked)) obj.checked.forEach(n => state.checked.add(n));
        save(); render();
      }catch(e){ alert("Invalid JSON file."); }
      importFile.value = "";
    };
    reader.readAsText(f);
  });

  // Initial render
  render();
</script>
</body>
</html>
